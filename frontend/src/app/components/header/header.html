<header class="app-header">
  <div class="header-left">
    <button class="menu-toggle" (click)="toggleMenu()">
      <span>☰</span>
    </button>
    
    <span class="app-title">Gestão e Controle</span>
  </div>
  
  <div class="header-right">
    @if (currentUser$ | async; as user) {
      <app-user-menu
        [user]="user"
        [sessionActiveFor]="sessionActiveFor"
        [tokenExpiresIn]="tokenExpiresIn"
        [currentTheme]="currentTheme$ | async"
        (themeChange)="setTheme($event)"
        (changePassword)="openChangePasswordModal()"
        (logout)="logout()"
      ></app-user-menu>
    }
  </div>
</header>

<!-- Modal de confirmação de logout -->
<app-confirmation-modal
  [isVisible]="showLogoutModal"
  title="Confirmar"
  message="Tem certeza que deseja sair do sistema?"
  confirmText="Sair"
  cancelText="Cancelar"
  (confirmed)="confirmLogout()"
  (cancelled)="cancelLogout()"
></app-confirmation-modal>

<!-- Modal de alteração de senha -->
<app-change-password-modal
  [isVisible]="showChangePasswordModal"
  [userId]="(currentUser$ | async)?.id || ''"
  (closed)="onChangePasswordClosed()"
  (passwordChanged)="onPasswordChanged()"
  (successMessage)="onSuccessMessage($event)"
  (errorMessage)="onErrorMessage($event)"
></app-change-password-modal>

<!-- Notificações Toast -->
<app-toast-notification
  [isVisible]="showToast"
  [message]="toastMessage"
  [type]="toastType"
  (closed)="onToastClosed()"
></app-toast-notification>
