<div class="motorista-form-container">
  <h2>{{ getFormTitle() }} Motorista</h2>

  <!-- Botões do topo -->
  <div class="form-actions form-actions-top">
    <button type="submit" class="btn btn-primary" [disabled]="loading" (click)="onSubmit()">
      <span *ngIf="loading" class="spinner"></span>
      {{ loading ? 'Salvando...' : getSubmitButtonText() }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <!-- Informações Gerais -->
    <div class="form-section">
      <h3>Informações Gerais</h3>
      
      <div class="form-row form-row-custom">
        <div class="form-field" style="flex: 2;">
          <label>Nome *</label>
          <input type="text" formControlName="nome" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('nome')">{{ getFieldError('nome') }}</div>
        </div>
      </div>

      <div class="form-row" style="display: flex; gap: 20px;">
        <div class="form-field" style="flex: 1;">
          <label>Sexo</label>
          <select formControlName="sexo" class="form-control">
            <option value="">Selecione</option>
            <option *ngFor="let s of sexoOptions" [value]="s">{{ s }}</option>
          </select>
          <div class="error" *ngIf="isFieldInvalid('sexo')">{{ getFieldError('sexo') }}</div>
        </div>

        <div class="form-field" style="flex: 1;">
          <label>Data de Nascimento *</label>
          <input type="date" formControlName="dataNascimento" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('dataNascimento')">{{ getFieldError('dataNascimento') }}</div>
        </div>

        <div class="form-field" style="flex: 1;">
          <label>Terceirizado</label>
          <select formControlName="terceirizado" class="form-control">
            <option value="">Selecione</option>
            <option *ngFor="let t of terceirizadoOptions" [value]="t">{{ t }}</option>
          </select>
          <div class="error" *ngIf="isFieldInvalid('terceirizado')">{{ getFieldError('terceirizado') }}</div>
        </div>

        <div class="form-field" style="flex: 1;">
          <label>Status *</label>
          <select formControlName="status" class="form-control">
            <option value="">Selecione</option>
            <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
          </select>
          <div class="error" *ngIf="isFieldInvalid('status')">{{ getFieldError('status') }}</div>
        </div>
      </div>
    </div>

    <!-- Documentos e Habilitação -->
    <div class="form-section">
      <h3>Documentos e Habilitação</h3>
      
      <div class="form-row form-row-custom">
        <div class="form-field" style="flex: 1;">
          <label>CPF *</label>
          <input type="text" formControlName="cpf" class="form-control" (input)="onCpfInput($event)" placeholder="00000000000" />
          <div class="error" *ngIf="isFieldInvalid('cpf')">{{ getFieldError('cpf') }}</div>
        </div>

        <div class="form-field" style="flex: 1;">
          <label>Matrícula *</label>
          <input type="text" formControlName="matricula" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('matricula')">{{ getFieldError('matricula') }}</div>
        </div>

        <div class="form-field" style="flex: 1;">
          <label>Identidade</label>
          <input type="text" formControlName="identidade" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('identidade')">{{ getFieldError('identidade') }}</div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-field">
          <label>Data de Habilitação *</label>
          <input type="date" formControlName="dataHabilitacao" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('dataHabilitacao')">{{ getFieldError('dataHabilitacao') }}</div>
        </div>

        <div class="form-field">
          <label>Data de Admissão *</label>
          <input type="date" formControlName="dataAdmissao" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('dataAdmissao')">{{ getFieldError('dataAdmissao') }}</div>
        </div>

        <div class="form-field">
          <label>Data Curso Transporte</label>
          <input type="date" formControlName="dataCursoTransporte" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('dataCursoTransporte')">{{ getFieldError('dataCursoTransporte') }}</div>
        </div>

        <div class="form-field">
          <label>Data Exame Toxicológico</label>
          <input type="date" formControlName="dataExameToxicologico" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('dataExameToxicologico')">{{ getFieldError('dataExameToxicologico') }}</div>
        </div>
      </div>
    </div>

    <!-- Endereço -->
    <div class="form-section">
      <h3>Endereço</h3>
      
      <div class="form-row">
        <div class="form-field">
          <label>Endereço</label>
          <input type="text" formControlName="endereco" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('endereco')">{{ getFieldError('endereco') }}</div>
        </div>

        <div class="form-field">
          <label>Bairro</label>
          <input type="text" formControlName="bairro" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('bairro')">{{ getFieldError('bairro') }}</div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-field">
          <label>Cidade</label>
          <input type="text" formControlName="cidade" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('cidade')">{{ getFieldError('cidade') }}</div>
        </div>

        <div class="form-field">
          <label>CEP</label>
          <input type="text" formControlName="cep" class="form-control" (input)="onCepInput($event)" placeholder="00000000" />
          <div class="error" *ngIf="isFieldInvalid('cep')">{{ getFieldError('cep') }}</div>
        </div>
      </div>
    </div>

    <!-- Contato e Outros -->
    <div class="form-section">
      <h3>Contato</h3>
      
      <div class="form-row">
        <div class="form-field">
          <label>E-mail</label>
          <input type="email" formControlName="email" class="form-control" />
          <div class="error" *ngIf="isFieldInvalid('email')">{{ getFieldError('email') }}</div>
        </div>

        <div class="form-field">
          <label>Telefone</label>
          <input type="text" formControlName="telefone" class="form-control" (input)="onPhoneInput($event, 'telefone')" placeholder="(00) 0000-0000" />
          <div class="error" *ngIf="isFieldInvalid('telefone')">{{ getFieldError('telefone') }}</div>
        </div>

        <div class="form-field">
          <label>Celular</label>
          <input type="text" formControlName="celular" class="form-control" (input)="onPhoneInput($event, 'celular')" placeholder="(00) 00000-0000" />
          <div class="error" *ngIf="isFieldInvalid('celular')">{{ getFieldError('celular') }}</div>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="loading">
        <span *ngIf="loading" class="spinner"></span>
        {{ loading ? 'Salvando...' : getSubmitButtonText() }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
    </div>
  </form>
</div>
