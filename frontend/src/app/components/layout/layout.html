<app-error-modal
  [visible]="(errorModalService.state$ | async)?.visible ?? false"
  [title]="(errorModalService.state$ | async)?.title"
  [message]="(errorModalService.state$ | async)?.message || ''"
  (closed)="errorModalService.hide()">
</app-error-modal>

<app-toast></app-toast>

<div
  class="layout-shell"
  *ngIf="isAuthenticated"
  [ngClass]="[
    isDesktop ? 'layout-shell--desktop' : 'layout-shell--mobile',
    'layout-shell--menu-' + menuState
  ]"
>
  <app-header class="layout-shell__header"></app-header>
  <div class="layout-shell__main">
    <app-navigation
      class="layout-shell__sidebar"
    ></app-navigation>
    <main class="layout-shell__content">
      <router-outlet></router-outlet>
    </main>
  </div>
  <div
    class="layout-shell__overlay"
    [class.active]="isMobileOverlayVisible"
    (click)="closeMenu()"
  ></div>
</div>

<div class="login-container" *ngIf="!isAuthenticated">
  <router-outlet></router-outlet>
</div>