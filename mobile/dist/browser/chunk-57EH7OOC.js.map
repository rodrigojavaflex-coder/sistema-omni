{
  "version": 3,
  "sources": ["src/app/pages/vistoria/vistoria-componentes.page.ts", "src/app/pages/vistoria/vistoria-componentes.page.html"],
  "sourcesContent": ["import { Component, OnInit, inject } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgFor, NgIf } from '@angular/common';\r\nimport {\r\n  IonContent,\r\n  IonHeader,\r\n  IonItem,\r\n  IonLabel,\r\n  IonList,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonButtons,\r\n  IonBackButton,\r\n  IonText,\r\n  IonSpinner,\r\n} from '@ionic/angular/standalone';\r\nimport { AreaVistoriadaService } from '../../services/area-vistoriada.service';\r\nimport { VistoriaFlowService } from '../../services/vistoria-flow.service';\r\nimport { VistoriaService } from '../../services/vistoria.service';\r\nimport { AreaComponente } from '../../models/area-vistoriada.model';\r\n\r\n@Component({\r\n  selector: 'app-vistoria-componentes',\r\n  standalone: true,\r\n  templateUrl: './vistoria-componentes.page.html',\r\n  styleUrls: ['./vistoria-componentes.page.scss'],\r\n  imports: [\r\n    NgIf,\r\n    NgFor,\r\n    IonContent,\r\n    IonHeader,\r\n    IonTitle,\r\n    IonToolbar,\r\n    IonButtons,\r\n    IonBackButton,\r\n    IonList,\r\n    IonItem,\r\n    IonLabel,\r\n    IonText,\r\n    IonSpinner,\r\n  ],\r\n})\r\nexport class VistoriaComponentesPage implements OnInit {\r\n  private route = inject(ActivatedRoute);\r\n  private router = inject(Router);\r\n  private areaService = inject(AreaVistoriadaService);\r\n  private flowService = inject(VistoriaFlowService);\r\n  private vistoriaService = inject(VistoriaService);\r\n\r\n  areaId = '';\r\n  areaNome = '';\r\n  componentes: AreaComponente[] = [];\r\n  irregularidadesPorComponente = new Set<string>();\r\n  loading = false;\r\n  errorMessage = '';\r\n\r\n  async ngOnInit(): Promise<void> {\r\n    const vistoriaId = this.flowService.getVistoriaId();\r\n    if (!vistoriaId) {\r\n      this.router.navigate(['/vistoria/inicio']);\r\n      return;\r\n    }\r\n\r\n    this.areaId = this.route.snapshot.paramMap.get('areaId') ?? '';\r\n    if (!this.areaId) {\r\n      this.router.navigate(['/vistoria/areas']);\r\n      return;\r\n    }\r\n    const state = this.router.getCurrentNavigation()?.extras?.state as { areaNome?: string } | undefined;\r\n    this.areaNome = state?.areaNome ?? 'Área';\r\n\r\n    this.loading = true;\r\n    try {\r\n      this.componentes = await this.areaService.listarComponentes(this.areaId);\r\n      const irregularidades = await this.vistoriaService.listarIrregularidades(vistoriaId);\r\n      irregularidades\r\n        .filter((item) => item.idarea === this.areaId)\r\n        .forEach((item) => this.irregularidadesPorComponente.add(item.idcomponente));\r\n    } catch {\r\n      this.errorMessage = 'Erro ao carregar componentes.';\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  abrirComponente(item: AreaComponente): void {\r\n    const componenteId = item.idComponente;\r\n    if (!componenteId) {\r\n      return;\r\n    }\r\n    this.router.navigate([`/vistoria/areas/${this.areaId}/componentes/${componenteId}`], {\r\n      state: {\r\n        areaNome: this.areaNome,\r\n        componenteNome: item.componente?.nome ?? 'Componente',\r\n      },\r\n    });\r\n  }\r\n}\r\n", "<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/vistoria/areas\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>{{ areaNome }}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <div class=\"content\" *ngIf=\"loading\">\r\n    <ion-spinner name=\"crescent\"></ion-spinner>\r\n    <p>Carregando componentes...</p>\r\n  </div>\r\n\r\n  <ion-text color=\"danger\" *ngIf=\"errorMessage\">\r\n    <p class=\"error-message\">{{ errorMessage }}</p>\r\n  </ion-text>\r\n\r\n  <ion-list *ngIf=\"!loading && componentes.length > 0\">\r\n    <ion-item button detail=\"true\" *ngFor=\"let item of componentes\" (click)=\"abrirComponente(item)\">\r\n      <ion-label>\r\n        <h2>{{ item.componente?.nome }}</h2>\r\n        <p *ngIf=\"irregularidadesPorComponente.has(item.idComponente)\">\r\n          Irregularidade registrada\r\n        </p>\r\n      </ion-label>\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n  <div class=\"content\" *ngIf=\"!loading && componentes.length === 0\">\r\n    <p>Nenhum componente encontrado nesta área.</p>\r\n  </div>\r\n</ion-content>\r\n"],
  "mappings": "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",
  "names": []
}
