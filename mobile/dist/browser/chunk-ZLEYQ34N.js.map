{
  "version": 3,
  "sources": ["src/app/pages/vistoria/vistoria-areas.page.ts", "src/app/pages/vistoria/vistoria-areas.page.html"],
  "sourcesContent": ["import { Component, OnInit, inject } from '@angular/core';\r\nimport { NgFor, NgIf } from '@angular/common';\r\nimport {\r\n  IonButton,\r\n  IonContent,\r\n  IonHeader,\r\n  IonItem,\r\n  IonLabel,\r\n  IonList,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonButtons,\r\n  IonMenuButton,\r\n  IonText,\r\n  IonSpinner,\r\n} from '@ionic/angular/standalone';\r\nimport { Router } from '@angular/router';\r\nimport { VistoriaFlowService } from '../../services/vistoria-flow.service';\r\nimport { AreaVistoriadaService } from '../../services/area-vistoriada.service';\r\nimport { VistoriaService } from '../../services/vistoria.service';\r\nimport { AreaVistoriada } from '../../models/area-vistoriada.model';\r\n\r\n@Component({\r\n  selector: 'app-vistoria-areas',\r\n  standalone: true,\r\n  templateUrl: './vistoria-areas.page.html',\r\n  styleUrls: ['./vistoria-areas.page.scss'],\r\n  imports: [\r\n    NgIf,\r\n    NgFor,\r\n    IonContent,\r\n    IonHeader,\r\n    IonTitle,\r\n    IonToolbar,\r\n    IonButtons,\r\n    IonMenuButton,\r\n    IonList,\r\n    IonItem,\r\n    IonLabel,\r\n    IonButton,\r\n    IonText,\r\n    IonSpinner,\r\n  ],\r\n})\r\nexport class VistoriaAreasPage implements OnInit {\r\n  private flowService = inject(VistoriaFlowService);\r\n  private areaService = inject(AreaVistoriadaService);\r\n  private vistoriaService = inject(VistoriaService);\r\n  private router = inject(Router);\r\n\r\n  areas: AreaVistoriada[] = [];\r\n  contagemPorArea: Record<string, number> = {};\r\n  loading = false;\r\n  errorMessage = '';\r\n\r\n  async ngOnInit(): Promise<void> {\r\n    const vistoriaId = this.flowService.getVistoriaId();\r\n    const modeloId = this.flowService.getVeiculoModeloId();\r\n    if (!vistoriaId || !modeloId) {\r\n      this.router.navigate(['/vistoria/inicio']);\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    try {\r\n      this.areas = await this.areaService.listarPorModelo(modeloId);\r\n      const irregularidades = await this.vistoriaService.listarIrregularidades(vistoriaId);\r\n      this.contagemPorArea = irregularidades.reduce((acc, item) => {\r\n        acc[item.idarea] = (acc[item.idarea] ?? 0) + 1;\r\n        return acc;\r\n      }, {} as Record<string, number>);\r\n    } catch {\r\n      this.errorMessage = 'Erro ao carregar áreas.';\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  abrirArea(area: AreaVistoriada): void {\r\n    this.router.navigate([`/vistoria/areas/${area.id}`], {\r\n      state: { areaNome: area.nome },\r\n    });\r\n  }\r\n\r\n  finalizarVistoria(): void {\r\n    this.router.navigate(['/vistoria/finalizar']);\r\n  }\r\n}\r\n", "<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-menu-button></ion-menu-button>\r\n    </ion-buttons>\r\n    <ion-title>Áreas Vistoriadas</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"finalizarVistoria()\">Finalizar</ion-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <div class=\"content\" *ngIf=\"loading\">\r\n    <ion-spinner name=\"crescent\"></ion-spinner>\r\n    <p>Carregando áreas...</p>\r\n  </div>\r\n\r\n  <ion-text color=\"danger\" *ngIf=\"errorMessage\">\r\n    <p class=\"error-message\">{{ errorMessage }}</p>\r\n  </ion-text>\r\n\r\n  <ion-list *ngIf=\"!loading && areas.length > 0\">\r\n    <ion-item button detail=\"true\" *ngFor=\"let area of areas\" (click)=\"abrirArea(area)\">\r\n      <ion-label>\r\n        <h2>{{ area.nome }}</h2>\r\n        <p *ngIf=\"contagemPorArea[area.id]\">\r\n          {{ contagemPorArea[area.id] }} irregularidade(s)\r\n        </p>\r\n      </ion-label>\r\n    </ion-item>\r\n  </ion-list>\r\n\r\n  <div class=\"content\" *ngIf=\"!loading && areas.length === 0\">\r\n    <p>Nenhuma área encontrada para o modelo.</p>\r\n  </div>\r\n</ion-content>\r\n"],
  "mappings": "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",
  "names": []
}
