{
  "version": 3,
  "sources": ["src/app/pages/login/login.page.ts", "src/app/pages/login/login.page.html"],
  "sourcesContent": ["import { Component, inject, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { \n  IonContent, \n  IonSpinner,\n  IonIcon,\n  ToastController,\n  AlertController\n} from '@ionic/angular/standalone';\nimport { addIcons } from 'ionicons';\nimport { fingerPrintOutline } from 'ionicons/icons';\nimport { AuthService } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonContent,\n    IonSpinner,\n    IonIcon\n  ]\n})\nexport class LoginPage implements OnInit {\n  private formBuilder = inject(FormBuilder);\n  private authService = inject(AuthService);\n  private router = inject(Router);\n  private toastController = inject(ToastController);\n  private alertController = inject(AlertController);\n\n  loginForm: FormGroup;\n  isLoading = false;\n  isBiometricLoading = false;\n  errorMessage = '';\n  biometricAvailable = false;\n  biometricEnabled = false;\n\n  constructor() {\n    this.loginForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n\n    addIcons({ fingerPrintOutline });\n  }\n\n  async ngOnInit(): Promise<void> {\n    await this.refreshBiometricState();\n  }\n\n  ionViewWillEnter(): void {\n    this.loginForm.reset({ email: '', password: '' });\n    this.errorMessage = '';\n    this.isLoading = false;\n    this.isBiometricLoading = false;\n  }\n\n  async onSubmit() {\n    if (this.loginForm.invalid) {\n      return;\n    }\n\n    this.isLoading = true;\n    this.errorMessage = '';\n    \n    // Desabilitar controles durante o loading\n    this.loginForm.disable();\n\n    try {\n      const { email, password } = this.loginForm.value;\n      await this.authService.login(email, password, { navigate: false });\n      await this.maybeEnableBiometrics(email, password);\n      this.router.navigate(['/home']);\n    } catch (error: any) {\n      this.errorMessage = error.message || 'Erro ao fazer login';\n      const toast = await this.toastController.create({\n        message: this.errorMessage,\n        duration: 3000,\n        color: 'danger',\n        position: 'top'\n      });\n      await toast.present();\n    } finally {\n      this.isLoading = false;\n      // Reabilitar controles após o loading\n      this.loginForm.enable();\n    }\n  }\n\n  async onBiometricLogin(): Promise<void> {\n    if (this.isBiometricLoading || this.isLoading) {\n      return;\n    }\n\n    this.isBiometricLoading = true;\n    this.errorMessage = '';\n\n    try {\n      await this.authService.loginWithBiometrics();\n      this.router.navigate(['/home']);\n    } catch (error: any) {\n      this.errorMessage = error.message || 'Erro ao autenticar com biometria';\n      const toast = await this.toastController.create({\n        message: this.errorMessage,\n        duration: 3000,\n        color: 'danger',\n        position: 'top'\n      });\n      await toast.present();\n    } finally {\n      this.isBiometricLoading = false;\n    }\n  }\n\n  private async refreshBiometricState(): Promise<void> {\n    this.biometricAvailable = await this.authService.isBiometricAvailable();\n    this.biometricEnabled = await this.authService.isBiometricEnabled();\n  }\n\n  private async maybeEnableBiometrics(email: string, password: string): Promise<void> {\n    await this.refreshBiometricState();\n    if (!this.biometricAvailable || this.biometricEnabled) {\n      return;\n    }\n\n    const alert = await this.alertController.create({\n      header: 'Ativar login por digital?',\n      message: 'Você poderá entrar mais rápido usando a biometria.',\n      buttons: [\n        {\n          text: 'Agora não',\n          role: 'cancel'\n        },\n        {\n          text: 'Ativar',\n          role: 'confirm'\n        }\n      ]\n    });\n\n    await alert.present();\n    const { role } = await alert.onDidDismiss();\n    if (role === 'confirm') {\n      const enabled = await this.authService.enableBiometricLogin(email, password);\n      this.biometricEnabled = enabled;\n    }\n  }\n}\n", "<ion-content [fullscreen]=\"true\">\n  <div class=\"login-wrapper\">\n    <div class=\"login-card\">\n      <div class=\"login-header\">\n        <h1 class=\"login-title\">Bem-vindo</h1>\n        <p class=\"login-subtitle\">Entre com suas credenciais</p>\n      </div>\n\n      <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\" class=\"login-form\">\n        <div class=\"input-group\">\n          <input\n            type=\"email\"\n            id=\"email\"\n            formControlName=\"email\"\n            class=\"form-input\"\n            [class.error]=\"loginForm.get('email')?.invalid && loginForm.get('email')?.touched\"\n            placeholder=\"Email\"\n            required>\n          <label for=\"email\" class=\"form-label\">Email</label>\n          <div class=\"error-message\" *ngIf=\"loginForm.get('email')?.invalid && loginForm.get('email')?.touched\">\n            <span *ngIf=\"loginForm.get('email')?.errors?.['required']\">Email é obrigatório</span>\n            <span *ngIf=\"loginForm.get('email')?.errors?.['email']\">Email inválido</span>\n          </div>\n        </div>\n\n        <div class=\"input-group\">\n          <input\n            type=\"password\"\n            id=\"password\"\n            formControlName=\"password\"\n            class=\"form-input\"\n            [class.error]=\"loginForm.get('password')?.invalid && loginForm.get('password')?.touched\"\n            placeholder=\"Senha\"\n            required>\n          <label for=\"password\" class=\"form-label\">Senha</label>\n          <div class=\"error-message\" *ngIf=\"loginForm.get('password')?.invalid && loginForm.get('password')?.touched\">\n            <span *ngIf=\"loginForm.get('password')?.errors?.['required']\">Senha é obrigatória</span>\n            <span *ngIf=\"loginForm.get('password')?.errors?.['minlength']\">Senha muito curta</span>\n          </div>\n        </div>\n\n        <div class=\"alert-error\" *ngIf=\"errorMessage\">\n          {{ errorMessage }}\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"login-button\"\n          [disabled]=\"loginForm.invalid || isLoading\">\n          <span class=\"button-text\" *ngIf=\"!isLoading\">Entrar</span>\n          <span class=\"button-text\" *ngIf=\"isLoading\">\n            <ion-spinner name=\"crescent\"></ion-spinner>\n            Entrando...\n          </span>\n        </button>\n\n        <button\n          *ngIf=\"biometricAvailable && biometricEnabled\"\n          type=\"button\"\n          class=\"biometric-button\"\n          [disabled]=\"isBiometricLoading || isLoading\"\n          (click)=\"onBiometricLogin()\">\n          <span class=\"button-text\" *ngIf=\"!isBiometricLoading\">\n            <ion-icon name=\"finger-print-outline\"></ion-icon>\n            Entrar com digital\n          </span>\n          <span class=\"button-text\" *ngIf=\"isBiometricLoading\">\n            <ion-spinner name=\"crescent\"></ion-spinner>\n            Verificando...\n          </span>\n        </button>\n      </form>\n    </div>\n  </div>\n</ion-content>\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoBY,IAAA,yBAAA,GAAA,MAAA;AAA2D,IAAA,iBAAA,GAAA,2BAAA;AAAmB,IAAA,uBAAA;;;;;AAC9E,IAAA,yBAAA,GAAA,MAAA;AAAwD,IAAA,iBAAA,GAAA,mBAAA;AAAc,IAAA,uBAAA;;;;;AAFxE,IAAA,yBAAA,GAAA,OAAA,EAAA;AACE,IAAA,qBAAA,GAAA,kCAAA,GAAA,GAAA,QAAA,EAAA,EAA2D,GAAA,kCAAA,GAAA,GAAA,QAAA,EAAA;AAE7D,IAAA,uBAAA;;;;;;AAFS,IAAA,oBAAA;AAAA,IAAA,qBAAA,SAAA,UAAA,OAAA,UAAA,IAAA,OAAA,MAAA,OAAA,OAAA,QAAA,UAAA,OAAA,OAAA,QAAA,OAAA,UAAA,CAAA;AACA,IAAA,oBAAA;AAAA,IAAA,qBAAA,SAAA,UAAA,OAAA,UAAA,IAAA,OAAA,MAAA,OAAA,OAAA,QAAA,UAAA,OAAA,OAAA,QAAA,OAAA,OAAA,CAAA;;;;;AAeP,IAAA,yBAAA,GAAA,MAAA;AAA8D,IAAA,iBAAA,GAAA,2BAAA;AAAmB,IAAA,uBAAA;;;;;AACjF,IAAA,yBAAA,GAAA,MAAA;AAA+D,IAAA,iBAAA,GAAA,mBAAA;AAAiB,IAAA,uBAAA;;;;;AAFlF,IAAA,yBAAA,GAAA,OAAA,EAAA;AACE,IAAA,qBAAA,GAAA,kCAAA,GAAA,GAAA,QAAA,EAAA,EAA8D,GAAA,kCAAA,GAAA,GAAA,QAAA,EAAA;AAEhE,IAAA,uBAAA;;;;;;AAFS,IAAA,oBAAA;AAAA,IAAA,qBAAA,SAAA,UAAA,OAAA,UAAA,IAAA,UAAA,MAAA,OAAA,OAAA,QAAA,UAAA,OAAA,OAAA,QAAA,OAAA,UAAA,CAAA;AACA,IAAA,oBAAA;AAAA,IAAA,qBAAA,SAAA,UAAA,OAAA,UAAA,IAAA,UAAA,MAAA,OAAA,OAAA,QAAA,UAAA,OAAA,OAAA,QAAA,OAAA,WAAA,CAAA;;;;;AAIX,IAAA,yBAAA,GAAA,OAAA,EAAA;AACE,IAAA,iBAAA,CAAA;AACF,IAAA,uBAAA;;;;AADE,IAAA,oBAAA;AAAA,IAAA,6BAAA,KAAA,OAAA,cAAA,GAAA;;;;;AAOA,IAAA,yBAAA,GAAA,QAAA,EAAA;AAA6C,IAAA,iBAAA,GAAA,QAAA;AAAM,IAAA,uBAAA;;;;;AACnD,IAAA,yBAAA,GAAA,QAAA,EAAA;AACE,IAAA,oBAAA,GAAA,eAAA,EAAA;AACA,IAAA,iBAAA,GAAA,eAAA;AACF,IAAA,uBAAA;;;;;AASA,IAAA,yBAAA,GAAA,QAAA,EAAA;AACE,IAAA,oBAAA,GAAA,YAAA,EAAA;AACA,IAAA,iBAAA,GAAA,sBAAA;AACF,IAAA,uBAAA;;;;;AACA,IAAA,yBAAA,GAAA,QAAA,EAAA;AACE,IAAA,oBAAA,GAAA,eAAA,EAAA;AACA,IAAA,iBAAA,GAAA,kBAAA;AACF,IAAA,uBAAA;;;;;;AAbF,IAAA,yBAAA,GAAA,UAAA,EAAA;AAKE,IAAA,qBAAA,SAAA,SAAA,uDAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,iBAAA,CAAkB;IAAA,CAAA;AAC3B,IAAA,qBAAA,GAAA,qCAAA,GAAA,GAAA,QAAA,EAAA,EAAsD,GAAA,qCAAA,GAAA,GAAA,QAAA,EAAA;AAQxD,IAAA,uBAAA;;;;AAVE,IAAA,qBAAA,YAAA,OAAA,sBAAA,OAAA,SAAA;AAE2B,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,CAAA,OAAA,kBAAA;AAIA,IAAA,oBAAA;AAAA,IAAA,qBAAA,QAAA,OAAA,kBAAA;;;ADrC/B,IAAO,YAAP,MAAO,WAAS;EACZ,cAAc,OAAO,WAAW;EAChC,cAAc,OAAO,WAAW;EAChC,SAAS,OAAO,MAAM;EACtB,kBAAkB,OAAO,eAAe;EACxC,kBAAkB,OAAO,eAAe;EAEhD;EACA,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,qBAAqB;EACrB,mBAAmB;EAEnB,cAAA;AACE,SAAK,YAAY,KAAK,YAAY,MAAM;MACtC,OAAO,CAAC,IAAI,CAAC,WAAW,UAAU,WAAW,KAAK,CAAC;MACnD,UAAU,CAAC,IAAI,CAAC,WAAW,UAAU,WAAW,UAAU,CAAC,CAAC,CAAC;KAC9D;AAED,aAAS,EAAE,mBAAkB,CAAE;EACjC;EAEM,WAAQ;;AACZ,YAAM,KAAK,sBAAqB;IAClC;;EAEA,mBAAgB;AACd,SAAK,UAAU,MAAM,EAAE,OAAO,IAAI,UAAU,GAAE,CAAE;AAChD,SAAK,eAAe;AACpB,SAAK,YAAY;AACjB,SAAK,qBAAqB;EAC5B;EAEM,WAAQ;;AACZ,UAAI,KAAK,UAAU,SAAS;AAC1B;MACF;AAEA,WAAK,YAAY;AACjB,WAAK,eAAe;AAGpB,WAAK,UAAU,QAAO;AAEtB,UAAI;AACF,cAAM,EAAE,OAAO,SAAQ,IAAK,KAAK,UAAU;AAC3C,cAAM,KAAK,YAAY,MAAM,OAAO,UAAU,EAAE,UAAU,MAAK,CAAE;AACjE,cAAM,KAAK,sBAAsB,OAAO,QAAQ;AAChD,aAAK,OAAO,SAAS,CAAC,OAAO,CAAC;MAChC,SAAS,OAAY;AACnB,aAAK,eAAe,MAAM,WAAW;AACrC,cAAM,QAAQ,MAAM,KAAK,gBAAgB,OAAO;UAC9C,SAAS,KAAK;UACd,UAAU;UACV,OAAO;UACP,UAAU;SACX;AACD,cAAM,MAAM,QAAO;MACrB;AACE,aAAK,YAAY;AAEjB,aAAK,UAAU,OAAM;MACvB;IACF;;EAEM,mBAAgB;;AACpB,UAAI,KAAK,sBAAsB,KAAK,WAAW;AAC7C;MACF;AAEA,WAAK,qBAAqB;AAC1B,WAAK,eAAe;AAEpB,UAAI;AACF,cAAM,KAAK,YAAY,oBAAmB;AAC1C,aAAK,OAAO,SAAS,CAAC,OAAO,CAAC;MAChC,SAAS,OAAY;AACnB,aAAK,eAAe,MAAM,WAAW;AACrC,cAAM,QAAQ,MAAM,KAAK,gBAAgB,OAAO;UAC9C,SAAS,KAAK;UACd,UAAU;UACV,OAAO;UACP,UAAU;SACX;AACD,cAAM,MAAM,QAAO;MACrB;AACE,aAAK,qBAAqB;MAC5B;IACF;;EAEc,wBAAqB;;AACjC,WAAK,qBAAqB,MAAM,KAAK,YAAY,qBAAoB;AACrE,WAAK,mBAAmB,MAAM,KAAK,YAAY,mBAAkB;IACnE;;EAEc,sBAAsB,OAAe,UAAgB;;AACjE,YAAM,KAAK,sBAAqB;AAChC,UAAI,CAAC,KAAK,sBAAsB,KAAK,kBAAkB;AACrD;MACF;AAEA,YAAM,QAAQ,MAAM,KAAK,gBAAgB,OAAO;QAC9C,QAAQ;QACR,SAAS;QACT,SAAS;UACP;YACE,MAAM;YACN,MAAM;;UAER;YACE,MAAM;YACN,MAAM;;;OAGX;AAED,YAAM,MAAM,QAAO;AACnB,YAAM,EAAE,KAAI,IAAK,MAAM,MAAM,aAAY;AACzC,UAAI,SAAS,WAAW;AACtB,cAAM,UAAU,MAAM,KAAK,YAAY,qBAAqB,OAAO,QAAQ;AAC3E,aAAK,mBAAmB;MAC1B;IACF;;;qCA3HW,YAAS;EAAA;yEAAT,YAAS,WAAA,CAAA,CAAA,WAAA,CAAA,GAAA,OAAA,IAAA,MAAA,IAAA,QAAA,CAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,cAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,GAAA,gBAAA,GAAA,CAAA,GAAA,cAAA,GAAA,YAAA,WAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,QAAA,SAAA,MAAA,SAAA,mBAAA,SAAA,eAAA,SAAA,YAAA,IAAA,GAAA,YAAA,GAAA,CAAA,OAAA,SAAA,GAAA,YAAA,GAAA,CAAA,SAAA,iBAAA,GAAA,MAAA,GAAA,CAAA,QAAA,YAAA,MAAA,YAAA,mBAAA,YAAA,eAAA,SAAA,YAAA,IAAA,GAAA,YAAA,GAAA,CAAA,OAAA,YAAA,GAAA,YAAA,GAAA,CAAA,SAAA,eAAA,GAAA,MAAA,GAAA,CAAA,QAAA,UAAA,GAAA,gBAAA,GAAA,UAAA,GAAA,CAAA,SAAA,eAAA,GAAA,MAAA,GAAA,CAAA,QAAA,UAAA,SAAA,oBAAA,GAAA,YAAA,SAAA,GAAA,MAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,GAAA,MAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,QAAA,UAAA,GAAA,CAAA,QAAA,UAAA,GAAA,oBAAA,GAAA,SAAA,UAAA,GAAA,CAAA,QAAA,sBAAA,CAAA,GAAA,UAAA,SAAA,mBAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;AC7BtB,MAAA,yBAAA,GAAA,eAAA,CAAA,EAAiC,GAAA,OAAA,CAAA,EACJ,GAAA,OAAA,CAAA,EACD,GAAA,OAAA,CAAA,EACI,GAAA,MAAA,CAAA;AACA,MAAA,iBAAA,GAAA,WAAA;AAAS,MAAA,uBAAA;AACjC,MAAA,yBAAA,GAAA,KAAA,CAAA;AAA0B,MAAA,iBAAA,GAAA,4BAAA;AAA0B,MAAA,uBAAA,EAAI;AAG1D,MAAA,yBAAA,GAAA,QAAA,CAAA;AAA8B,MAAA,qBAAA,YAAA,SAAA,8CAAA;AAAA,eAAY,IAAA,SAAA;MAAU,CAAA;AAClD,MAAA,yBAAA,GAAA,OAAA,CAAA;AACE,MAAA,oBAAA,IAAA,SAAA,CAAA;AAQA,MAAA,yBAAA,IAAA,SAAA,CAAA;AAAsC,MAAA,iBAAA,IAAA,OAAA;AAAK,MAAA,uBAAA;AAC3C,MAAA,qBAAA,IAAA,2BAAA,GAAA,GAAA,OAAA,EAAA;AAIF,MAAA,uBAAA;AAEA,MAAA,yBAAA,IAAA,OAAA,CAAA;AACE,MAAA,oBAAA,IAAA,SAAA,EAAA;AAQA,MAAA,yBAAA,IAAA,SAAA,EAAA;AAAyC,MAAA,iBAAA,IAAA,OAAA;AAAK,MAAA,uBAAA;AAC9C,MAAA,qBAAA,IAAA,2BAAA,GAAA,GAAA,OAAA,EAAA;AAIF,MAAA,uBAAA;AAEA,MAAA,qBAAA,IAAA,2BAAA,GAAA,GAAA,OAAA,EAAA;AAIA,MAAA,yBAAA,IAAA,UAAA,EAAA;AAIE,MAAA,qBAAA,IAAA,4BAAA,GAAA,GAAA,QAAA,EAAA,EAA6C,IAAA,4BAAA,GAAA,GAAA,QAAA,EAAA;AAK/C,MAAA,uBAAA;AAEA,MAAA,qBAAA,IAAA,8BAAA,GAAA,GAAA,UAAA,EAAA;AAeF,MAAA,uBAAA,EAAO,EACH,EACF;;;;;;;AAzEK,MAAA,qBAAA,cAAA,IAAA;AAQD,MAAA,oBAAA,CAAA;AAAA,MAAA,qBAAA,aAAA,IAAA,SAAA;AAOA,MAAA,oBAAA,CAAA;AAAA,MAAA,sBAAA,WAAA,UAAA,IAAA,UAAA,IAAA,OAAA,MAAA,OAAA,OAAA,QAAA,cAAA,UAAA,IAAA,UAAA,IAAA,OAAA,MAAA,OAAA,OAAA,QAAA,QAAA;AAI0B,MAAA,oBAAA,CAAA;AAAA,MAAA,qBAAA,UAAA,UAAA,IAAA,UAAA,IAAA,OAAA,MAAA,OAAA,OAAA,QAAA,cAAA,UAAA,IAAA,UAAA,IAAA,OAAA,MAAA,OAAA,OAAA,QAAA,QAAA;AAY1B,MAAA,oBAAA,CAAA;AAAA,MAAA,sBAAA,WAAA,UAAA,IAAA,UAAA,IAAA,UAAA,MAAA,OAAA,OAAA,QAAA,cAAA,UAAA,IAAA,UAAA,IAAA,UAAA,MAAA,OAAA,OAAA,QAAA,QAAA;AAI0B,MAAA,oBAAA,CAAA;AAAA,MAAA,qBAAA,UAAA,UAAA,IAAA,UAAA,IAAA,UAAA,MAAA,OAAA,OAAA,QAAA,cAAA,UAAA,IAAA,UAAA,IAAA,UAAA,MAAA,OAAA,OAAA,QAAA,QAAA;AAMJ,MAAA,oBAAA;AAAA,MAAA,qBAAA,QAAA,IAAA,YAAA;AAOxB,MAAA,oBAAA;AAAA,MAAA,qBAAA,YAAA,IAAA,UAAA,WAAA,IAAA,SAAA;AAC2B,MAAA,oBAAA;AAAA,MAAA,qBAAA,QAAA,CAAA,IAAA,SAAA;AACA,MAAA,oBAAA;AAAA,MAAA,qBAAA,QAAA,IAAA,SAAA;AAO1B,MAAA,oBAAA;AAAA,MAAA,qBAAA,QAAA,IAAA,sBAAA,IAAA,gBAAA;;;IDpCP;IAAY;IACZ;IAAW;IAAA;IAAA;IAAA;IAAA;IACX;IAAmB;IAAA;IACnB;IACA;IACA;EAAO,GAAA,QAAA,CAAA,65HAAA,EAAA,CAAA;;;sEAGE,WAAS,CAAA;UAdrB;uBACW,aAAW,YAGT,MAAI,SACP;MACP;MACA;MACA;MACA;MACA;MACA;OACD,UAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAAA,QAAA,CAAA,6+GAAA,EAAA,CAAA;;;;6EAEU,WAAS,EAAA,WAAA,aAAA,UAAA,qCAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
